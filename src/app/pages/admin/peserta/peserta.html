<div class="peserta-page">
  <!-- Header -->
  <header class="page-header">
    <div class="title-group">
      <h1>Manajemen Peserta</h1>
      <p>Monitor dan kelola peserta event</p>
    </div>

    <button class="btn-export" type="button" (click)="onExportExcel()">
      â¬‡ Export Excel
    </button>
  </header>

  <!-- Search bar -->
  <section class="toolbar">
    <div class="search-box">
      <span class="search-icon">ğŸ”</span>
      <input
        type="text"
        placeholder="Cari Peserta"
        [(ngModel)]="searchTerm"
      />
    </div>
  </section>

  <!-- INFO: LOADING / ERROR -->
  <section *ngIf="isLoading || errorMessage" class="info-wrapper">
    <p *ngIf="isLoading" class="info-text">Memuat data peserta...</p>
    <p *ngIf="!isLoading && errorMessage" class="info-text error">
      {{ errorMessage }}
    </p>
  </section>

  <!-- Table -->
  <section class="table-wrapper" *ngIf="!isLoading && !errorMessage">
    <table *ngIf="participants.length">
      <thead>
        <tr>
          <th class="col-name">Nama</th>
          <th class="col-email">Email</th>
          <th class="col-event">Event</th>
          <th class="col-status">Status</th>
          <th class="col-actions">Aksi</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let p of filteredParticipants()">
          <td class="col-name">
            {{ p.name }}
          </td>
          <td class="col-email">
            {{ p.email }}
          </td>
          <td class="col-event">
            <div class="event-title">{{ p.eventTitle }}</div>
            <div class="event-sub">{{ p.eventOrganizer }}</div>
          </td>
          <td class="col-status">
            <span
              class="status-pill"
              [ngClass]="{
                'status-confirmed': p.status === 'Terkonfirmasi',
                'status-pending': p.status === 'Pending'
              }"
            >
              {{ p.status }}
            </span>
          </td>
          <td class="col-actions">
            <button
              type="button"
              class="icon-btn"
              title="Lihat"
              (click)="onView(p)"
            >
              ğŸ‘
            </button>
            <button
              type="button"
              class="icon-btn"
              title="Edit"
              (click)="onEdit(p)"
            >
              âœï¸
            </button>
            <button
              type="button"
              class="icon-btn icon-danger"
              title="Hapus"
              (click)="onDelete(p)"
            >
              ğŸ—‘
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Kalau benar-benar belum ada peserta -->
    <p
      class="info-text"
      *ngIf="!participants.length"
    >
      Belum ada data peserta.
    </p>
  </section>
</div>
